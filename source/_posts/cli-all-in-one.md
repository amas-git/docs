---
title: 终端和终端模拟器
date: 2018-09-12 17:23:08
tags:
---

## Terminal
## Terminal Emulator
## Shell
## ANSI escape code
有时候我们不仅仅需要在终端上输入一些文字, 还有需要控制终端干些别的事儿,比如:
 - 改变光标的位置
 - 改变文字的颜色

```
EscapeCode = Escape + Code
Escape     = Character 27 = 033 = 0x1b = ^[ = \e
```

是时候使用转意码大法了:
```
ESC = ^[
```
 
当终端读取到这个固定前缀的字符的时候,那么它就意识到后面的是发送给它的命令. 这个想法诞生于1970年.

我们来看看一个寻常无比的操作: 
 1. 在终端上按下右键移动一个字符
 2. 实际上, 终端接受到了一串字符, 在我的电脑上它大概是**^[[C**
 3. 我们来捕捉一下,输入cat,回车,然后按下方向键下.
 
```
$ cat
^[[C
``` 

终端读取到这个特殊的字符序列,然后将光标向右移动了一下. 
### CSI sequences (ESC [ 或者 ^[)
```
ESC [
```

### SGR (Select Graphic Rendition)

 - 设置显示属性
 - 多个属性可以在一个sequence中指定, 通过;分割即可
 - 每个属性遇到SGR-RESET的时候恢复默认情形
 - SGR-RESET: ESC m 或 ESC 0 m
 - 粗体: 1
 - 斜体: 3
 - 下划线: 4
 - 设置前景色: 30-37
 - 设置前景色: 38;5;n 或者 38;2;r;g;b
 - 默认前景色: 39
 - 设置背景色: 40-47
 - 设置背景色: 48;5;n 或者 48;2;r;g;b
 - 默认背景色: 49
 

上面这个可能有点抽象,我们来具体拼装一下:
```
$ print "\e[31mHELLO" 

# 清空屏幕
$ print "\ec"


# "\e[0m" : 清楚文字显示属性
$ print "\e[31mABC\e[0m123" 
```

## Vendor-specific escape sequences
早期的计算机很贵, 不是一般人可以随意就能拥有的. 为了能够让大家可以充分利用计算机, 通常采用搭配廉价终端的方式. 终端本身不具备
计算能力, 但是可以通过终端链接到主机, 通过终端远程使用计算机.


## 参考
 - https://www.ansilove.org/
